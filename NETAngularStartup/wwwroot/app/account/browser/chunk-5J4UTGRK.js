import{a as T,e as Se,g as Q,k as we,l as Ae,m as Ie}from"./chunk-AW6GLTM6.js";import{a as z}from"./chunk-GTTQKVCF.js";import{a as O}from"./chunk-6FSCV3TH.js";import{a as Me}from"./chunk-TOYSTB67.js";import{a as De}from"./chunk-QWIGCCEX.js";import{a as Ue}from"./chunk-LPJ56NT7.js";import{a as Ee}from"./chunk-6NY67VQD.js";import{a as be,c as ye}from"./chunk-IPHKMWFL.js";import"./chunk-NNQMNV6J.js";import{C as fe,D as A,E as R,G as xe,M as Ce,g as se,m as de,t as pe,v as me}from"./chunk-IQZ6UM2A.js";import{$ as b,$a as N,Aa as S,Ba as a,Bb as w,Cb as P,Db as V,Ec as M,Fc as ge,Ha as B,Ia as j,La as m,Oa as o,Ob as q,Qb as Z,Rb as ee,S as E,Sb as te,T as k,Tb as ie,Vb as ne,Wb as re,Xa as n,Xb as ae,Y as H,Ya as r,Za as p,_a as L,bb as C,c as G,db as f,eb as l,fc as oe,ha as h,hb as F,hc as le,ia as g,jb as X,jc as ce,kc as _e,mc as D,pb as s,pc as ue,qb as y,rb as I,sb as Y,sc as ve,tb as W,ub as J,vb as K,wc as he,xb as u}from"./chunk-EURR6JOP.js";import{a as U,b as $}from"./chunk-WWX6BADO.js";var v=i=>[i];function Le(i,t){i&1&&(n(0,"div"),p(1,"app-norecord",1),r()),i&2&&(a(),o("message","Access Restricted"))}function Ne(i,t){i&1&&(n(0,"span",36),s(1," Not Confirmed "),r())}function Fe(i,t){i&1&&(n(0,"span",37),s(1," Confirmed "),r())}function Pe(i,t){i&1&&(n(0,"span",36),s(1," Inactive "),r())}function Ve(i,t){i&1&&(n(0,"span",37),s(1," Active "),r())}function Oe(i,t){i&1&&(n(0,"span",38),s(1," Locked "),r())}function ze(i,t){i&1&&(n(0,"span",38),s(1," Archive "),r())}function Qe(i,t){if(i&1){let e=C();n(0,"tr")(1,"td")(2,"div",15)(3,"div",16)(4,"a",17),p(5,"img",18),r()(),n(6,"div",19)(7,"a",17),s(8),r()()()(),n(9,"td"),s(10),w(11,"date"),r(),n(12,"td"),m(13,Ne,2,0,"span",20)(14,Fe,2,0,"span",21),r(),n(15,"td"),L(16,22),m(17,Pe,2,0,"span",23)(18,Ve,2,0,"span",24)(19,Oe,2,0,"span",25)(20,ze,2,0,"span",25),N(),r(),n(21,"td")(22,"div",26)(23,"div",27),p(24,"i",28),r(),n(25,"ul",29)(26,"li")(27,"a",30),p(28,"i",31),s(29," Access Account"),r()(),n(30,"li")(31,"a",32),p(32,"i",31),s(33," View Profile"),r()(),n(34,"li")(35,"a",33),p(36,"i",31),s(37," Change Password"),r()(),n(38,"li")(39,"a",33),p(40,"i",31),s(41," Change Email"),r()(),n(42,"li")(43,"a",33),p(44,"i",31),s(45," Update Role"),r()(),n(46,"li")(47,"a",34),f("click",function(d){let _=h(e).$implicit;return l(7).deleteRecord(_,d),g(!1)}),p(48,"i",35),s(49," Delete"),r()()()()()()}if(i&2){let e=t.$implicit,c=l(7);a(4),o("routerLink",u(23,v,"/users/profile/"+e.id)),a(),o("src",e.avatar,S),a(2),o("routerLink",u(25,v,"/users/profile/"+e.id)),a(),I(" ",e.fullName," "),a(2),y(V(11,20,e.createdAt,"mediumDate")),a(3),o("ngIf",!e.emailConfirmed),a(),o("ngIf",e.emailConfirmed),a(2),o("ngSwitch",e.isEnabled),a(),o("ngSwitchCase",0),a(),o("ngSwitchCase",1),a(),o("ngSwitchCase",4),a(),o("ngSwitchCase",3),a(7),X("href","",c.appConfig.apiUrl,"/",c.appConfig.culture,"/sub_acc/",e.id,"",S),a(4),o("routerLink",u(27,v,"/users/profile/"+e.id)),a(4),o("routerLink",u(29,v,"/users/change-password/"+e.id)),a(4),o("routerLink",u(31,v,"/users/change-email/"+e.id)),a(4),o("routerLink",u(33,v,"/users/update-role/"+e.id))}}function $e(i,t){if(i&1){let e=C();n(0,"div")(1,"div",9)(2,"table",10)(3,"thead")(4,"tr")(5,"th"),s(6,"Name"),r(),n(7,"th"),s(8,"Date Registered"),r(),n(9,"th"),s(10,"Email Confirmed"),r(),n(11,"th"),s(12,"Status"),r(),n(13,"th",11),s(14,"Action"),r()()(),n(15,"tbody"),m(16,Qe,50,35,"tr",12),r()()(),n(17,"div",13)(18,"pagination",14),w(19,"async"),f("OnSelection",function(d){h(e);let _=l(6);return g(_.paginationSelection(d))}),r()()()}if(i&2){let e,c=l().ngIf,d=l(5);a(16),o("ngForOf",c)("ngForTrackBy",d.getKey),a(2),o("currentPage",d.navQuery.pagenumber)("totalRecords",(e=P(19,5,d.records$))!==null&&e!==void 0?e:0)("pageSize",d.navQuery.pagesize)}}function Ge(i,t){if(i&1&&(n(0,"div"),p(1,"app-norecord",1),r()),i&2){let e=l(6);a(),o("message",e.NoRecordText)}}function He(i,t){if(i&1&&(L(0),m(1,$e,20,7,"div",0)(2,Ge,2,1,"div",0),N()),i&2){let e=t.ngIf;a(),o("ngIf",e.length>0),a(),o("ngIf",e.length===0)}}function Be(i,t){if(i&1){let e=C();n(0,"div")(1,"div",2)(2,"div",3)(3,"div",4)(4,"div")(5,"input",5),J("ngModelChange",function(d){h(e);let _=l(4);return W(_.navQuery.term,d)||(_.navQuery.term=d),g(d)}),f("keyup.enter",function(d){h(e);let _=l(4);return g(_.searchRecords(d))}),r()(),n(6,"div",6)(7,"button",7),f("click",function(){h(e);let d=l(4);return g(d.toolbarAction("add"))}),s(8," Create Account "),r()()(),n(9,"div",8),m(10,He,3,2,"ng-container",0),w(11,"async"),r()()()()}if(i&2){let e=l(4);a(5),Y("ngModel",e.navQuery.term),a(5),o("ngIf",P(11,2,e.data$))}}function je(i,t){if(i&1){let e=C();n(0,"a",51),f("click",function(d){return h(e),l(6).navAction("enable","Activate Account","Are you sure you want to activate user account?",d),g(!1)}),n(1,"span"),s(2,"Activate Account"),r()()}}function Xe(i,t){if(i&1){let e=C();n(0,"a",51),f("click",function(d){return h(e),l(6).navAction("disable","Deactivate Account","Are you sure you want to deactivate user account?",d),g(!1)}),n(1,"span"),s(2,"Block Account"),r()()}}function Ye(i,t){i&1&&p(0,"app-loader")}function We(i,t){if(i&1){let e=C();n(0,"div")(1,"dynamic-modal-form",55),f("OnSubmit",function(d){h(e);let _=l(6);return g(_.submitForm(d))}),r()()}if(i&2){let e=l(6);a(),o("controls",e.controls)("showLoader",e.showLoader)("showCancel",!1)("showModal",!1)("submitText",e.submitButtonText)}}function Je(i,t){if(i&1){let e=C();n(0,"div",43)(1,"div",44)(2,"div",2)(3,"div",3)(4,"div",39),p(5,"img",45),r(),n(6,"div",46)(7,"div",47)(8,"a",48)(9,"span"),s(10,"Update Profile"),r()(),n(11,"a",48)(12,"span"),s(13,"Update Avatar"),r()(),n(14,"a",49)(15,"span"),s(16,"Change Password"),r()(),n(17,"a",48)(18,"span"),s(19,"Change Email"),r()(),n(20,"a",48)(21,"span"),s(22,"Update User-Role"),r()(),m(23,je,3,0,"a",50)(24,Xe,3,0,"a",50),n(25,"a",51),f("click",function(d){return h(e),l(5).navAction("delete","Delete User","Are you sure you want to delete user account?",d),g(!1)}),n(26,"span"),s(27,"Delete"),r()()()()()()(),n(28,"div",52)(29,"div",53)(30,"h5",54),s(31),r(),p(32,"hr"),m(33,Ye,1,0,"app-loader",0)(34,We,2,5,"div",0),r()()()}if(i&2){let e=l(5);a(5),F("alt",e.selectedDocument.firstName),o("src",e.selectedDocument.avatar,S),a(3),o("routerLink",u(12,v,"/users/update/"+e.selectedDocument.id)),a(3),o("routerLink",u(14,v,"/users/update-avatar/"+e.selectedDocument.id)),a(3),o("routerLink",u(16,v,"/users/change-password/"+e.selectedDocument.id)),a(3),o("routerLink",u(18,v,"/users/change-email/"+e.selectedDocument.id)),a(3),o("routerLink",u(20,v,"/users/update-role/"+e.selectedDocument.id)),a(3),o("ngIf",e.selectedDocument.isEnabled===0),a(),o("ngIf",e.selectedDocument.isEnabled===1),a(7),y(e.headingTitle),a(2),o("ngIf",e.showLoader),a(),o("ngIf",!e.showLoader)}}function Ke(i,t){i&1&&p(0,"app-loader")}function qe(i,t){if(i&1){let e=C();n(0,"div")(1,"dynamic-modal-form",55),f("OnSubmit",function(d){h(e);let _=l(6);return g(_.submitForm(d))}),r()()}if(i&2){let e=l(6);a(),o("controls",e.controls)("showLoader",e.showLoader)("showCancel",!1)("showModal",!1)("submitText",e.submitButtonText)}}function Ze(i,t){if(i&1&&(n(0,"div",2)(1,"div",53)(2,"h5",54),s(3),r(),p(4,"hr"),m(5,Ke,1,0,"app-loader",0)(6,qe,2,5,"div",0),r()()),i&2){let e=l(5);a(3),y(e.headingTitle),a(2),o("ngIf",e.showLoader),a(),o("ngIf",!e.showLoader)}}function et(i,t){if(i&1){let e=C();n(0,"div")(1,"div",39)(2,"button",40),f("click",function(d){h(e);let _=l(4);return g(_.back(d))}),s(3," Back to Listing "),r()(),m(4,Je,35,22,"div",41)(5,Ze,7,3,"div",42),r()}if(i&2){let e=l(4);a(4),o("ngIf",e.pageIndex!=="_CREATE_"),a(),o("ngIf",e.pageIndex==="_CREATE_")}}function tt(i,t){if(i&1){let e=C();n(0,"a",51),f("click",function(d){return h(e),l(5).navAction("enable","Activate Account","Are you sure you want to activate user account?",d),g(!1)}),n(1,"span"),s(2,"Activate Account"),r()()}}function it(i,t){if(i&1){let e=C();n(0,"a",51),f("click",function(d){return h(e),l(5).navAction("disable","Deactivate Account","Are you sure you want to deactivate user account?",d),g(!1)}),n(1,"span"),s(2,"Block Account"),r()()}}function nt(i,t){i&1&&p(0,"app-loader")}function rt(i,t){i&1&&(n(0,"span",65),s(1,"Yes"),r())}function at(i,t){i&1&&(n(0,"span",66),s(1,"No"),r())}function ot(i,t){i&1&&(n(0,"span",65),s(1,"Enabled"),r())}function st(i,t){i&1&&(n(0,"span",66),s(1,"Inactive"),r())}function dt(i,t){if(i&1&&(n(0,"div")(1,"div",2)(2,"div",3)(3,"h4",54),s(4),r(),n(5,"p",58),s(6),w(7,"date"),r(),n(8,"div",59)(9,"h2"),s(10,"Information"),r(),p(11,"hr"),n(12,"dl",43)(13,"dt",60)(14,"h6"),s(15,"ID:"),r()(),n(16,"dd",61)(17,"h6"),s(18),r()(),n(19,"dt",60)(20,"h6"),s(21,"Email:"),r()(),n(22,"dd",61)(23,"h6"),s(24),r()(),n(25,"dt",60)(26,"h6"),s(27,"Phone No:"),r()(),n(28,"dd",61)(29,"h6"),s(30),r()(),n(31,"dt",60)(32,"h6"),s(33,"Email Confirmed:"),r()(),n(34,"dd",61)(35,"h6")(36,"a",62),m(37,rt,2,0,"span",63)(38,at,2,0,"span",64),r()()(),n(39,"dt",60)(40,"h6"),s(41,"Account status:"),r()(),n(42,"dd",61)(43,"h6")(44,"a",62),m(45,ot,2,0,"span",63)(46,st,2,0,"span",64),r()()()()()()()()),i&2){let e=l(6);a(4),I(" ",e.selectedDocument.firstName," "),a(2),I(" Registered: ",V(7,11,e.selectedDocument.createdAt,"fullDate")," "),a(12),y(e.selectedDocument.id),a(6),y(e.selectedDocument.email),a(6),y(e.selectedDocument.phoneNumber),a(6),o("routerLink",u(14,v,"/users/emailConfirmed/"+e.selectedDocument.emailConfirmed)),a(),o("ngIf",e.selectedDocument.emailConfirmed),a(),o("ngIf",!e.selectedDocument.emailConfirmed),a(6),o("routerLink",u(16,v,"/users/isenabled/"+e.selectedDocument.isEnabled)),a(),o("ngIf",e.selectedDocument.isEnabled),a(),o("ngIf",!e.selectedDocument.isEnabled)}}function lt(i,t){if(i&1&&(n(0,"div")(1,"div",43)(2,"div",56)(3,"div",22),m(4,dt,47,18,"div",57),r()()()()),i&2){let e=l(5);a(3),o("ngSwitch",e.ProfileView),a(),o("ngSwitchCase",0)}}function ct(i,t){if(i&1){let e=C();n(0,"div")(1,"div",39)(2,"button",40),f("click",function(d){h(e);let _=l(4);return g(_.back(d))}),s(3," Back to Listing "),r()(),n(4,"div",43)(5,"div",44)(6,"div",2)(7,"div",3)(8,"div",39),p(9,"img",45),r(),n(10,"div",46)(11,"div",47)(12,"a",48)(13,"span"),s(14,"Update Profile"),r()(),n(15,"a",48)(16,"span"),s(17,"Update Avatar"),r()(),n(18,"a",49)(19,"span"),s(20,"Change Password"),r()(),n(21,"a",48)(22,"span"),s(23,"Change Email"),r()(),n(24,"a",48)(25,"span"),s(26,"Update User-Role"),r()(),m(27,tt,3,0,"a",50)(28,it,3,0,"a",50),n(29,"a",51),f("click",function(d){return h(e),l(4).navAction("delete","Delete User","Are you sure you want to delete user account?",d),g(!1)}),n(30,"span"),s(31,"Delete"),r()()()()()()(),n(32,"div",52),m(33,nt,1,0,"app-loader",0)(34,lt,5,2,"div",0),r()()()}if(i&2){let e=l(4);a(9),F("alt",e.selectedDocument.firstName),o("src",e.selectedDocument.avatar,S),a(3),o("routerLink",u(11,v,"/users/update/"+e.selectedDocument.id)),a(3),o("routerLink",u(13,v,"/users/update-avatar/"+e.selectedDocument.id)),a(3),o("routerLink",u(15,v,"/users/change-password/"+e.selectedDocument.id)),a(3),o("routerLink",u(17,v,"/users/change-email/"+e.selectedDocument.id)),a(3),o("routerLink",u(19,v,"/users/update-role/"+e.selectedDocument.id)),a(3),o("ngIf",e.selectedDocument.isEnabled===0||!e.selectedDocument.emailConfirmed),a(),o("ngIf",e.selectedDocument.isEnabled===1&&e.selectedDocument.emailConfirmed),a(5),o("ngIf",e.showLoader),a(),o("ngIf",!e.showLoader)}}function _t(i,t){if(i&1&&(n(0,"div"),m(1,Be,12,4,"div",0)(2,et,6,2,"div",0)(3,ct,35,21,"div",0),r()),i&2){let e=l(3);a(),o("ngIf",e.pageIndex==="_INDEX_"),a(),o("ngIf",e.pageIndex==="_CREATE_"||e.pageIndex==="_UPDATE_"||e.pageIndex==="_CHANGE_AVATAR_"||e.pageIndex==="_CHANGE_USER_ROLE_"||e.pageIndex==="_CHANGE_EMAIL_"||e.pageIndex==="_CHANGE_PASS_"),a(),o("ngIf",e.pageIndex==="_PROFILE_")}}function pt(i,t){if(i&1&&(n(0,"div"),p(1,"app-norecord",1),r()),i&2){let e=l(3);a(),o("message",e.errorMessage)}}function mt(i,t){if(i&1&&(n(0,"div"),m(1,_t,4,3,"div",0)(2,pt,2,1,"div",0),r()),i&2){let e=l(2);a(),o("ngIf",e.errorMessage===""),a(),o("ngIf",e.errorMessage!=="")}}function ut(i,t){if(i&1&&(n(0,"div"),m(1,Le,2,1,"div",0)(2,mt,3,2,"div",0),r()),i&2){let e=l();a(),o("ngIf",!e.pageRole.admin),a(),o("ngIf",e.pageRole.admin&&e.pageInit)}}var x=class i{store=b(se);formService=b(z);userService=b(O);route=b(le);router=b(ce);coreService=b(fe);titleService=b(oe);appConfig=b(me);modalService=b(ye);location=b(q);auth$=this.store.select(pe);config$=this.store.select(Ce);loading$=this.store.select(Ae);data$=this.store.select(we);records$=this.store.select(Ie);navQuery=U({},A);isAuthenticated=!1;User=U({},R);selectedDocument=U({},R);configs=[];pageRole=xe;ProfileView=0;navButton="Find Records";pageIndex="_INDEX_";errorMessage="";pageInit=!1;showLoader=!1;NoRecordText="No Records Found!";submitButtonText="Submit";headingTitle="Create Account";controls=[];destroy$=new G;ngOnInit(){this.initializeAuthSubscription()}initializeAuthSubscription(){this.auth$.pipe(E(this.destroy$),k(t=>{t.length>0&&t[0].isAuthenticated&&(this.isAuthenticated=!0,this.User=t[0].User??U({},R),this.pageRole=this.coreService.processRole(t[0].Role||[]),this.loadAppConfigs())})).subscribe()}loadAppConfigs(){this.config$.pipe(E(this.destroy$),k(t=>{t.length>0&&(this.configs=t,this.navQuery.pagesize=this.configs[0].configs.settings.general.pageSize,this.initializeRouteListener())})).subscribe()}initializeRouteListener(){this.route.params.pipe(E(this.destroy$)).subscribe(t=>{this.coreService.bindParams(this.navQuery,t),this.initializeRouteData()})}initializeRouteData(){let t=this.route.snapshot.firstChild?.data||this.route.snapshot.data;t.key&&(this.pageIndex=t.key),t.title&&this.titleService.setTitle(`${t.title} - ${this.appConfig.getConfig("title")}`),this.initializePage(),this.pageInit=!0}initializePage(){switch(this.pageIndex){case"_INDEX_":this.initializeManageListings();break;case"_CREATE_":case"_UPDATE_":this.initializeCreateUpdate();break;case"_PROFILE_":this.initializeProfile();break;case"_CHANGE_PASS_":this.initUpdatePass();break;case"_CHANGE_EMAIL_":this.initUpdateEmail();break;case"_CHANGE_USER_ROLE_":this.initUpdateUserRole();break;case"_CHANGE_AVATAR_":this.initUpdateAvatar();break;default:this.handleUnknownPage();break}}initializeManageListings(){this.store.dispatch(T({Query:this.navQuery}))}initializeCreateUpdate(){if(console.log("userid : ",this.navQuery.id),this.pageIndex==="_UPDATE_"&&!this.navQuery.id){this.errorMessage="Missing record information";return}this.headingTitle=this.pageIndex==="_UPDATE_"?"Update Information":"Create Account",this.pageIndex==="_UPDATE_"?this.navQuery.id?this.loadDocument(this.navQuery.id):this.errorMessage="Invalid record ID":this.initializeControls()}initUpdatePass(){console.log("userid : ",this.navQuery.id),this.headingTitle="Change Password",this.loadDocument(this.navQuery.id)}initUpdateEmail(){console.log("userid : ",this.navQuery.id),this.headingTitle="Change Email",this.loadDocument(this.navQuery.id)}initUpdateUserRole(){console.log("userid : ",this.navQuery.id),this.headingTitle="Change User Role",this.loadDocument(this.navQuery.id)}initUpdateAvatar(){console.log("userid : ",this.navQuery.id),this.headingTitle="Update Avatar",this.loadDocument(this.navQuery.id)}initializeProfile(){this.headingTitle="User Profile",this.loadDocument(this.navQuery.id)}handleUnknownPage(){this.errorMessage=`Unknown page: ${this.pageIndex}`}loadDocument(t){this.showLoader=!0,this.userService.GetInfo($(U({},A),{id:t})).pipe(E(this.destroy$)).subscribe({next:e=>{e.status==="error"?this.showNotification(e.message??"Unknown error","danger"):e.record&&this.handleDocumentResponse(e.record),this.showLoader=!1},error:e=>{this.showNotification("Failed to load document","danger"),this.showLoader=!1}})}handleDocumentResponse(t){this.selectedDocument=t,this.pageIndex==="_CHANGE_EMAIL_"?this.initializeChangeEmailControls():this.pageIndex==="_CHANGE_PASS_"?this.initializeChangePasswordControls():this.pageIndex==="_CHANGE_AVATAR_"?this.initializeUpdateAvatarControls():this.pageIndex==="_CHANGE_USER_ROLE_"?this.initializeUpdateUserRoleControls():this.pageIndex==="_UPDATE_"?this.initializeUpdateControls():this.pageIndex==="_PROFILE_"||this.initializeControls()}initializeControls(){this.controls=this.formService.GenerateControls(this.selectedDocument,this.configs)}initializeUpdateControls(){this.controls=this.formService.UpdateProfile(this.selectedDocument,this.configs)}initializeChangePasswordControls(){this.controls=this.formService.ChangePasswordControls(this.selectedDocument,this.configs)}initializeChangeEmailControls(){this.controls=this.formService.ChangeEmailControls(this.selectedDocument,this.configs)}initializeUpdateUserRoleControls(){this.controls=this.formService.UpdateUserRoleControls(this.selectedDocument,this.configs)}initializeUpdateAvatarControls(){this.controls=this.formService.UpdateAvatarControls(this.selectedDocument,this.configs)}submitForm(t){this.validateForm(t)&&(this.prepareDocumentForSubmission(t),this.pageIndex==="_CHANGE_EMAIL_"?this.changeEmailSubmission():this.pageIndex==="_CHANGE_PASS_"?this.changePasswordSubmission():this.pageIndex==="_CHANGE_AVATAR_"?this.updateAvatarSubmission():this.pageIndex==="_CHANGE_USER_ROLE_"?this.changeUserRoleSubmission():this.processUserSubmission())}validateForm(t){return!0}prepareDocumentForSubmission(t){Object.assign(this.selectedDocument,t)}processUserSubmission(){this.showLoader=!0,this.userService.ProcessRecord(this.selectedDocument).pipe(E(this.destroy$)).subscribe({next:t=>{t.status==="error"?this.showNotification(t.message??"Unknown error","danger"):this.handleSuccessfulSubmission(t),this.showLoader=!1},error:t=>{this.showNotification("Failed to submit blog","danger"),this.showLoader=!1}})}updateAvatarSubmission(){this.showLoader=!0,this.userService.UpdateAvatar(this.selectedDocument).pipe(E(this.destroy$)).subscribe({next:t=>{t.status==="error"?this.showNotification(t.message??"Unknown error","danger"):this.showNotification(t.message??"Operation successful","success"),this.showLoader=!1},error:t=>{this.showNotification("Failed to update avatar","danger"),this.showLoader=!1}})}changePasswordSubmission(){this.showLoader=!0,this.userService.ChangePassword(this.selectedDocument).pipe(E(this.destroy$)).subscribe({next:t=>{t.status==="error"?this.showNotification(t.message??"Unknown error","danger"):this.showNotification(t.message??"Operation successful","success"),this.showLoader=!1},error:t=>{this.showNotification("Failed to update password","danger"),this.showLoader=!1}})}changeEmailSubmission(){this.showLoader=!0,this.userService.ChangeEmail(this.selectedDocument).pipe(E(this.destroy$)).subscribe({next:t=>{t.status==="error"?this.showNotification(t.message??"Unknown error","danger"):this.showNotification(t.message??"Operation successful","success"),this.showLoader=!1},error:t=>{this.showNotification("Failed to update email","danger"),this.showLoader=!1}})}changeUserRoleSubmission(){this.showLoader=!0,this.userService.ChangeUserRole(this.selectedDocument).pipe(E(this.destroy$)).subscribe({next:t=>{t.status==="error"?this.showNotification(t.message??"Unknown error","danger"):this.showNotification(t.message??"Operation successful","success"),this.showLoader=!1},error:t=>{this.showNotification("Failed to update user role","danger"),this.showLoader=!1}})}handleSuccessfulSubmission(t){let e=this.selectedDocument.id===""?"added":"updated";t.record&&(this.selectedDocument=t.record,this.store.dispatch(Se({User:this.selectedDocument}))),this.showNotification(`Record ${e} successfully!`,"success"),this.router.navigate(["/users"])}showNotification(t,e){this.store.dispatch(de({title:t,text:"",css:`bg-${e}`}))}searchRecords(t){this.navQuery.pagenumber=1,this.store.dispatch(T({Query:this.navQuery}))}paginationSelection(t){this.navQuery.pagenumber=t,this.store.dispatch(T({Query:this.navQuery}))}toolbarAction(t){switch(t){case"add":this.router.navigate(["/users/create-account"]);break}}deleteRecord(t,e){this.openConfirmationDialog("Delete Record","Are you sure you want to delete selected record",()=>{this.store.dispatch(Q({Entities:[t],actionstatus:"delete"}))},e)}navAction(t,e,c,d){this.openConfirmationDialog(e,c,()=>{t==="enable"?(this.selectedDocument.isEnabled=1,this.selectedDocument.emailConfirmed=!0):t==="disable"&&(this.selectedDocument.isEnabled=0),this.store.dispatch(Q({Entities:[this.selectedDocument],actionstatus:t})),t==="delete"&&this.router.navigate(["/users"])},d)}openConfirmationDialog(t,e,c,d){d.stopPropagation();let _=this.modalService.open(De,{backdrop:!1});_.componentInstance.Info={title:t,message:e},_.result.then(()=>c(),()=>console.log("Dialog dismissed"))}edit(t){t.stopPropagation(),this.router.navigate([`/users/update/${this.selectedDocument.id}`])}updateAvatar(t){}back(t){t.stopPropagation(),this.location.back()}getKey(t,e){return e.id}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=B({type:i,selectors:[["app-main-user"]],features:[K([z,O])],decls:1,vars:1,consts:[[4,"ngIf"],[3,"message"],[1,"card"],[1,"card-body"],[1,"d-flex","justify-content-between"],["type","text","placeholder","Search Users...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"d-flex"],[1,"btn","btn-primary","me-1",3,"click"],[1,"mt-4","mb-4"],[1,"table-responsive"],[1,"table","align-middle","mb-0"],[1,"text-nowrap"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex","justify-content-cent","mt-3"],[3,"OnSelection","currentPage","totalRecords","pageSize"],[1,"d-flex","align-items-center"],[1,"recent-product-img"],[3,"routerLink"],[3,"src"],[1,"ms-2"],["class","badge rounded-pill bg-light-danger text-danger",4,"ngIf"],["class","badge rounded-pill bg-light-success text-success",4,"ngIf"],[3,"ngSwitch"],["class","badge rounded-pill bg-light-danger text-danger",4,"ngSwitchCase"],["class","badge rounded-pill bg-light-success text-success",4,"ngSwitchCase"],["class","badge rounded-pill bg-light-danger text-success",4,"ngSwitchCase"],[1,"dropdown","options","ms-auto"],["data-bs-toggle","dropdown",1,"dropdown-toggle","dropdown-toggle-nocaret"],[1,"bx","bx-dots-horizontal-rounded"],[1,"dropdown-menu"],[1,"dropdown-item",3,"href"],[1,"bx","bx-lock"],[1,"dropdown-item",3,"routerLink"],["href","javascript:;",1,"dropdown-item",3,"routerLink"],["href","javascript:;",1,"dropdown-item",3,"click"],[1,"bx","bx-trash"],[1,"badge","rounded-pill","bg-light-danger","text-danger"],[1,"badge","rounded-pill","bg-light-success","text-success"],[1,"badge","rounded-pill","bg-light-danger","text-success"],[1,"mb-3"],[1,"btn","btn-secondary","me-1",3,"click"],["class","row",4,"ngIf"],["class","card",4,"ngIf"],[1,"row"],[1,"col-12","col-lg-3"],[1,"img-fluid",3,"src","alt"],[1,"fm-menu"],[1,"list-group","list-group-flush"],["href","javascript:;",1,"list-group-item","py-1",3,"routerLink"],[1,"list-group-item","py-1",3,"routerLink"],["href","javascript:;","class","list-group-item py-1",3,"click",4,"ngIf"],["href","javascript:;",1,"list-group-item","py-1",3,"click"],[1,"col-12","col-lg-9"],[1,"card-body","p-4"],[1,"card-title"],[3,"OnSubmit","controls","showLoader","showCancel","showModal","submitText"],[1,"col-md-12"],[4,"ngSwitchCase"],[1,"mb-2"],[1,"border","border-3","p-4","rounded","mb-3"],[1,"col-sm-3","mb-2"],[1,"col-sm-9","mb-2"],[1,"me-1",3,"routerLink"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-success"],[1,"text-danger"]],template:function(e,c){e&1&&m(0,ut,3,2,"div",0),e&2&&o("ngIf",c.isAuthenticated)},dependencies:[ee,Z,te,ie,ne,re,D,_e,M,ue,ve,he,be,Ee,Ue,Me],encapsulation:2})};var Te=[{path:"",data:{key:"_INDEX_",title:"Manage Users",breadcrumb:[{label:"Dashboard",url:"/"},{label:"Users",url:""}]},component:x},{path:"create-account",data:{key:"_CREATE_",title:"Create Account",breadcrumb:[{label:"Dashboard",url:"/"},{label:"Users",url:"/users"},{label:"Create Account",url:""}]},component:x},{path:"update/:id",data:{title:"Edit User Information",key:"_UPDATE_",breadcrumb:[{label:"Dashboard",url:"/"},{label:"Users",url:"/users"},{label:"Edit Information",url:""}]},component:x},{path:"profile/:id",data:{key:"_PROFILE_",title:"Detail Information",breadcrumb:[{label:"Dashboard",url:"/"},{label:"Users",url:"/users"},{label:"Detail Information",url:""}]},component:x},{path:"change-password/:id",data:{title:"Change Password",key:"_CHANGE_PASS_",breadcrumb:[{label:"Dashboard",url:"/"},{label:"Users",url:"/users"},{label:"Change Password",url:""}]},component:x},{path:"change-email/:id",data:{title:"Change Email",key:"_CHANGE_EMAIL_",breadcrumb:[{label:"Dashboard",url:"/"},{label:"Users",url:"/users"},{label:"Change Email",url:""}]},component:x},{path:"update-role/:id",data:{title:"Update User-Role",key:"_CHANGE_USER_ROLE_",breadcrumb:[{label:"Dashboard",url:"/"},{label:"Users",url:"/users"},{label:"Update User-Role",url:""}]},component:x},{path:"update-avatar/:id",data:{title:"Update Avatar",key:"_CHANGE_AVATAR_",breadcrumb:[{label:"Dashboard",url:"/"},{label:"Users",url:"/users"},{label:"Update User-Role",url:""}]},component:x},{path:"reports",data:{title:"Manage Reports",breadcrumb:[{label:"Dashboard",url:"/"},{label:"Users",url:"/users"},{label:"Reports",url:""}]},component:x}];for(let i in A)Te.push({path:i+"/:"+i,data:{title:"Manage Users - Filter By "+i,breadcrumb:[{label:"Dashboard",url:"/"},{label:"Users",url:"/users"},{label:"Filter By: "+i,url:""}]},component:x});var Re=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=j({type:i});static \u0275inj=H({imports:[ae,M,ge,D.forChild(Te),x]})};export{Re as MainUserModule};
