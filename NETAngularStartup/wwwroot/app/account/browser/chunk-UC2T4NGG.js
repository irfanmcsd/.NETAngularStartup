import{b as a,c as d,h as u,j as c,k as h,l as x}from"./chunk-IQZ6UM2A.js";import{a as n,b as s}from"./chunk-WWX6BADO.js";var g=x(),M=g.getInitialState({records:0,loading:!1,error:null,selectedIds:[],navList:[]}),v=a("[Categories] Load Categories",d()),L=a("[Categories] Load Categories Success",d()),A=a("[Categories] Load Categories Failure",d()),_=a("[Categories] Add Categories",d()),I=a("[Categories] Add Categories Success",d()),b=a("[Categories] Delete Category Success",d()),E=a("[Categories] Update Categories Success",d()),D=a("[Categories] Add Categories Failure",d()),O=a("[Categories] Action Categories",d()),F=a("[Categories] Add Categories Action Success",d()),Q=a("[Categories] Add Categories Action Failure",d()),R=a("[Categories] Toggle Category Selection",d()),U=h(M,c(v,e=>s(n({},e),{loading:!0,error:null})),c(L,(e,{categories:t,navList:r,records:o})=>g.setAll(t,s(n({},e),{records:o,navList:r,loading:!1}))),c(A,(e,{error:t})=>s(n({},e),{loading:!1,error:t})),c(I,(e,{category:t})=>{let r=g.addOne(t,e),o;return t.parentid===null||t.parentid===void 0||t.parentid===0?o=[...e.navList,t]:o=e.navList.map(l=>l.id===t.parentid?s(n({},l),{children:[...l.children||[],t]}):l),s(n({},r),{navList:o})}),c(E,(e,{category:t})=>{console.log("update cateogry info >>:"+t);let r=g.updateOne({id:t.id,changes:t},e),o=y(e.navList,t);return s(n({},r),{navList:o})}),c(O,e=>s(n({},e),{loading:!0,error:null})),c(b,(e,{id:t})=>{let r=e.entities[t];if(!r)return e;let o=g.removeOne(t,e),l;r.parentid===null||r.parentid===void 0||r.parentid===0?l=e.navList.filter(i=>i.id!==t):l=e.navList.map(i=>i.id===r.parentid?s(n({},i),{children:(i.children||[]).filter(f=>f.id!==t)}):i);let p=Object.values(e.entities).filter(i=>i?.parentid===t).map(i=>i.id),C=p.length>0?g.removeMany(p,o):o;return r.children&&r.children.length>0&&(l=l.map(i=>i.id===t?s(n({},i),{children:[]}):i)),s(n({},C),{navList:l})}),c(F,(e,{entities:t,actionstatus:r})=>g.updateMany(t.map(o=>({id:o.id,changes:n({},o)})),s(n({},e),{loading:!1}))),c(R,(e,{id:t})=>{let r=[...e.selectedIds],o=r.indexOf(t);return o===-1?r.push(t):r.splice(o,1),s(n({},e),{selectedIds:r})})),m=e=>e.category,N=u(m,e=>g.getSelectors().selectAll(e)),j=e=>e.loading,S=u(m,e=>e.navList||[]),B=u(S,e=>e.filter(t=>t.parentid===null||t.parentid===void 0||t.parentid===0)),J=e=>u(S,t=>e===0?t:(console.log("child nav list: nav list: ",t),t.find(o=>o.id===e)?.children||[]));var k=e=>u(S,t=>{if(!e)return t;let r=e.toLowerCase(),o=l=>l.reduce((p,C)=>{let i=C.category_data.title.toLowerCase().includes(r),f=C.children?o(C.children):void 0;return(i||f&&f.length>0)&&p.push(s(n({},C),{children:f||[]})),p},[]);return o(t)}),T=e=>e.selectedIds,q=u(N,T,(e,t)=>e.filter(r=>t.includes(r.id)));function y(e,t){return e.map(r=>r.id===t.id?s(n({},t),{children:r.children}):r.children&&r.children.length>0?s(n({},r),{children:y(r.children,t)}):r)}export{v as a,L as b,A as c,I as d,b as e,E as f,D as g,O as h,F as i,Q as j,R as k,U as l,j as m,J as n,k as o};
